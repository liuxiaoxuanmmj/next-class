#部署流程说明

## 1、打包成jar包

```bash
mvn clean package -DskipTests
```

## 2、构建docker镜像

```bash
docker build -t nextclass-backend:版本号 .
```

## 3、启动docker镜像

### 3.1、云服务器启动（Linux环境）

需要先将构建好的容器上传至阿里云镜像仓库，再在云服务器上拉取镜像并启动

#### 登录阿里云镜像仓库

```bash
docker login --username=lvshuh crpi-46zrw2heq12pc1hu.cn-chengdu.personal.cr.aliyuncs.com
```

> 输入密码: lsh17715707824

#### 标记镜像

```bash
docker tag [ImageId] crpi-46zrw2heq12pc1hu.cn-chengdu.personal.cr.aliyuncs.com/dadalv_cloudtest01/next_class:[镜像版本号]
```

#### 上传镜像

```bash
docker push crpi-46zrw2heq12pc1hu.cn-chengdu.personal.cr.aliyuncs.com/dadalv_cloudtest01/next_class:[镜像版本号]
```

#### 拉取镜像

```bash
docker pull crpi-46zrw2heq12pc1hu.cn-chengdu.personal.cr.aliyuncs.com/dadalv_cloudtest01/next_class:[镜像版本号]
```

#### 启动容器

```bash
docker run -d \
--name nextclass-backend \
--network host \
-v /data/uploads/schedule:/data/uploads/schedule \
-v /data/logs:/data/logs \
crpi-46zrw2heq12pc1hu.cn-chengdu.personal.cr.aliyuncs.com/dadalv_cloudtest01/next_class:v4
```